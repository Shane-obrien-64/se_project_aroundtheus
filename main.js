!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:i}=e;this._name=n,this._link=i,this._cardSelector=t,this._handleCardClick=s}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteCard())),this._cardImage.addEventListener("click",(()=>this._handleCardClick(this._name,this._link)))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__description"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._cardElement}}class t{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupEl=document.querySelector(t),this._closeIcon=this._popupEl.querySelector(".modal__close"),this.close=this.close.bind(this)}open(){this._popupEl.classList.add("modal__opened"),this._popupEl.addEventListener("mousedown",this._closeOnOverlay),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupEl.classList.remove("modal__opened"),this._popupEl.removeEventListener("mousedown",this._closeOnOverlay),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_closeOnOverlay=e=>{e.target===e.currentTarget&&this.close()};setEventListeners(){this._closeIcon.addEventListener("click",this.close)}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupEl.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__save")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e=[...this._popupForm.querySelectorAll(".modal__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}))}}const i={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-add-button"),r=document.querySelector("#profile-edit-btn"),a=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-add-modal"),c=a.querySelector("#profile-name-input"),u=a.querySelector("#profile-description-input"),d=new class{constructor(e,t){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}}("#profile-name","#profile-des");function p(e,t){m.open(e,t)}function _(t){return new e(t,"#card-template",p).getView()}const h=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=_(e);h.appendItem(t)}},"#card-list");h.renderItems();const m=new class extends s{constructor(e){super({popupSelector:e}),this._popupEl=document.querySelector(e),this._popupImage=this._popupEl.querySelector(".modal__image"),this._popupTitle=this._popupEl.querySelector(".modal__image-description")}open(e,t){super.open(),this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e}}("#preview-image-modal"),E=new n("#profile-edit-modal",(function(e){d.setUserInfo(e),E.close()})),v=new n("#profile-add-modal",(function(e){const t=_({name:e.title,link:e.imageUrl});h.prependItem(t),v.close()}));m.setEventListeners(),E.setEventListeners(),v.setEventListeners();const g=new t(i,a),S=new t(i,l);g.enableValidation(),S.enableValidation(),r.addEventListener("click",(()=>{const e=d.getUserInfo();c.value=e.name,u.value=e.description,E.open(),g.toggleButtonState()})),o.addEventListener("click",(()=>{v.open(),S.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlSWNvbigpKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKClcbiAgICApO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZXNjcmlwdGlvblwiKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gIWlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUljb24gPSB0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlT25PdmVybGF5KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fb3BlbmVkXCIpO1xuICAgIHRoaXMuX3BvcHVwRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uT3ZlcmxheSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2Nsb3NlT25PdmVybGF5ID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IFsuLi50aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIildO1xuICAgIGNvbnN0IGlucHV0RGF0YSA9IHt9O1xuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXREYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0RGF0YTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0RGF0YSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuLy8gaW1wb3J0IHsgY2xvc2VQb3B1cCwgb3BlblBvcHVwIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLyBwcm9maWxlIGJ1dHRvbnNcbmNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xuLy8gZm9ybXNcbmNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBhZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcbi8vIGZvcm0gaW5wdXRzXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIjcHJvZmlsZS1uYW1lXCIsIFwiI3Byb2ZpbGUtZGVzXCIpO1xuXG4vLyBmdW5jdGlvbnNcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xuICBjb25zdCBuYW1lID0gZGF0YS50aXRsZTtcbiAgY29uc3QgbGluayA9IGRhdGEuaW1hZ2VVcmw7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KTtcbiAgY2FyZFNlY3Rpb24ucHJlcGVuZEl0ZW0oY2FyZCk7XG4gIHByb2ZpbGVBZGRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xuICByZXR1cm4gbmV3Q2FyZC5nZXRWaWV3KCk7XG59XG5cbi8vIHNlY3Rpb25cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkU2VjdGlvbi5hcHBlbmRJdGVtKGNhcmQpO1xuICAgIH0sXG4gIH0sXG4gIFwiI2NhcmQtbGlzdFwiXG4pO1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy8gcG9wdXBzXG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5jb25zdCBwcm9maWxlQWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcbiAgaGFuZGxlQ2FyZEZvcm1TdWJtaXRcbik7XG5cbnByZXZpZXdJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlQWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gZm9ybSB2YWxpZGF0aW9uXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBlZGl0Rm9ybSk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRGb3JtKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIGV2ZW50IGhhbmRsZXJzXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHVzZXIubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyLmRlc2NyaXB0aW9uO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbiAgZWRpdEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlQWRkUG9wdXAub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VjdGlvblNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VjdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG4gIGFwcGVuZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1kZXNjcmlwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4odGl0bGUsIGxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gdGl0bGU7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiX2dldEVsZW1lbnQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJldmVyeSIsIl9lbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9kaXNhYmxlQnV0dG9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsIiwiX2Nsb3NlSWNvbiIsImNsb3NlIiwiYmluZCIsIm9wZW4iLCJfY2xvc2VPbk92ZXJsYXkiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXREYXRhIiwiaW5wdXQiLCJ2YWx1ZSIsInByb2ZpbGVBZGRCdG4iLCJwcm9maWxlRWRpdEJ0biIsImVkaXRGb3JtIiwiYWRkRm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9kZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsInByZXZpZXdJbWFnZVBvcHVwIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZFNlY3Rpb24iLCJzZWN0aW9uU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYXBwZW5kSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJpdGVtIiwiY2FyZCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJ0aXRsZSIsInByb2ZpbGVFZGl0UG9wdXAiLCJkYXRhIiwicHJvZmlsZUFkZFBvcHVwIiwiaW1hZ2VVcmwiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==